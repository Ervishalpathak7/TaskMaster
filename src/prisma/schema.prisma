datasource db {
  url      = env("DATABASE_URL")
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model Users {
  id        String   @id @default(uuid()) 
  createdAt DateTime @default(now())
  email     String   @unique
  name      String
  password  String 
  role      String[]  @default(["user"])
  projects  Projects[]
  tasks     Tasks[] @relation("TaskAssignees")
  RefreshToken RefreshTokens?
}

model Projects {
  id          String @id @default(uuid())
  name        String
  description String?
  tasks       Tasks[]
  owner       Users   @relation(fields: [ownerId], references: [id], onDelete: Cascade)
  ownerId     String
}

model Tasks {
  id          Int    @id @default(autoincrement())
  name        String
  description String?
  projectRelation Projects @relation(fields: [projectId], references: [id], onDelete: Cascade)
  projectId   String
  assignees   Users[] @relation("TaskAssignees")
  deadline    DateTime
}

model RefreshTokens {
  id     String  @id @default(uuid())
  user   Users   @relation(fields: [userId], references: [id], onDelete: Cascade)
  token  String
  userId String   @unique
}
